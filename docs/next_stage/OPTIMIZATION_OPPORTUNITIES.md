# gofer MCP Optimization Opportunities

–ì–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è AI-–∞–≥–µ–Ω—Ç–æ–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ gofer MCP –∏ –≤—ã—è–≤–ª–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø–æ —Ç–æ–∫–µ–Ω–∞–º, —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏ –∫–∞—á–µ—Å—Ç–≤—É –≤—ã–¥–∞—á–∏.

## –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–∏—Ö –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π

### Pattern 1: –ü–æ–≤—Ç–æ—Ä–Ω–æ–µ —á—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
**–ü—Ä–æ–±–ª–µ–º–∞:** –û–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ —Ñ–∞–π–ª —á–∏—Ç–∞–µ—Ç—Å—è 3+ —Ä–∞–∑–∞ –≤ —Ç–µ—á–µ–Ω–∏–µ —Å–µ–∞–Ω—Å–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∑–∞–¥–∞—á.
- –ü—Ä–∏–º–µ—Ä: `embedder.rs` —á–∏—Ç–∞–ª—Å—è –¥–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ, –º–æ–¥–µ–ª—è—Ö
- –ü–æ—Ç–µ—Ä–∏: ~6000 —Ç–æ–∫–µ–Ω–æ–≤ √ó 3 = 18000 —Ç–æ–∫–µ–Ω–æ–≤ –Ω–∞ –æ–¥–Ω—É –∑–∞–¥–∞—á—É

**–†–µ—à–µ–Ω–∏–µ:** Server-side –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å TTL (—Å–º. Pattern 8)

---

### Pattern 2: –®–∏—Ä–æ–∫–∏–π –ø–æ–∏—Å–∫ ‚Üí –†—É—á–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
**–ü—Ä–æ–±–ª–µ–º–∞:** `search(query, limit=10)` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Å–µ —Ç–æ–ø-10 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤, –Ω–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã —Ç–æ–ª—å–∫–æ 2-3.
- –ù–µ—Ç –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏, –Ω–µ—Ç —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ confidence score
- AI –ø–æ–ª—É—á–∞–µ—Ç 5000 —Ç–æ–∫–µ–Ω–æ–≤, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç 1500

**–†–µ—à–µ–Ω–∏–µ:** `search_preview` —Å relevance scores (—Å–º. Pattern 10)

---

### Pattern 3: –ß—Ç–µ–Ω–∏–µ –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤ –¥–ª—è –º–∞–ª—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
**–ü—Ä–æ–±–ª–µ–º–∞:** –ù—É–∂–Ω–∞ –æ–¥–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è –∏–∑ —Ñ–∞–π–ª–∞ –Ω–∞ 300 —Å—Ç—Ä–æ–∫ ‚Üí —á–∏—Ç–∞–µ—Ç—Å—è –≤–µ—Å—å —Ñ–∞–π–ª (6000 —Ç–æ–∫–µ–Ω–æ–≤), –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è 200 —Ç–æ–∫–µ–Ω–æ–≤.

**–†–µ—à–µ–Ω–∏–µ:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `read_file(start_line, end_line)` –∫–æ–≥–¥–∞ –∏–∑–≤–µ—Å—Ç–Ω–∞ –ª–æ–∫–∞—Ü–∏—è
- –î–æ–±–∞–≤–∏—Ç—å `get_symbol_definition(symbol_name)` –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∫–æ–¥ —Å–∏–º–≤–æ–ª–∞

---

### Pattern 4: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –≤—ã–∑–æ–≤—ã –¥–ª—è –æ–¥–Ω–æ–π –∑–∞–¥–∞—á–∏
**–ü—Ä–æ–±–ª–µ–º–∞:** –°–±–æ—Ä –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –æ —Å–∏–º–≤–æ–ª–µ —Ç—Ä–µ–±—É–µ—Ç 5-6 –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤:
1. `search_symbols("SymbolName")` ‚Üí –Ω–∞–π—Ç–∏ —Ñ–∞–π–ª
2. `read_file(file)` ‚Üí –ø—Ä–æ—á–∏—Ç–∞—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ
3. `get_callers("SymbolName")` ‚Üí –∫—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç
4. `get_callees("SymbolName")` ‚Üí —á—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç
5. `get_references("SymbolName")` ‚Üí –≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
6. `get_summary(file)` ‚Üí –ø–æ–Ω—è—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ

**–†–µ—à–µ–Ω–∏–µ:** Unified tool (—Å–º. Pattern 6)

---

### Pattern 5: –ò–∑–±—ã—Ç–æ—á–Ω—ã–µ JSON —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
**–ü—Ä–æ–±–ª–µ–º–∞:** `get_symbols()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç verbose JSON:
```json
{
  "symbols": [
    {"name": "foo", "kind": "function", "file": "...", "line": 42, "signature": "...", "visibility": "public"},
    // ... √ó200
  ]
}
```

–ö–æ–≥–¥–∞ –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ —Å–ø–∏—Å–æ–∫ –∏–º—ë–Ω –∏–ª–∏ –∫—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞.

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä `format="compact"` –∏–ª–∏ `format="names_only"`

---

### Pattern 6: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–±–æ—Ä–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
**–ü—Ä–æ–±–ª–µ–º–∞:** –î–ª—è –ø–æ–ª–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –æ —Å–∏–º–≤–æ–ª–µ –Ω—É–∂–Ω—ã 4 –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞ (—Å–º. Pattern 4).

**–†–µ—à–µ–Ω–∏–µ:** 
```rust
// –ù–æ–≤—ã–π unified –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç
get_symbol_context(symbol_name) -> {
    definition: SymbolInfo,
    callers: Vec<Caller>,
    callees: Vec<Callee>,
    references: Vec<Reference>,
    doc_comments: String,
    related_tests: Vec<TestInfo>
}
```

**Impact:** 
- –≠–∫–æ–Ω–æ–º–∏—è: 3 –≤—ã–∑–æ–≤–∞ ‚Üí 1 –≤—ã–∑–æ–≤
- –í—Ä–µ–º—è: -2-3 —Å–µ–∫—É–Ω–¥—ã –Ω–∞ –∑–∞–¥–∞—á—É
- –¢–æ–∫–µ–Ω—ã: -20% (—É–±–∏—Ä–∞–µ–º JSON overhead √ó 4)

---

### Pattern 7: –ù–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π –ø–æ–∏—Å–∫ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–∏ feature:
1. `search("feature X")` ‚Üí –Ω–∞–π—Ç–∏ entry point
2. `read_file(main_file)` ‚Üí —É–≤–∏–¥–µ—Ç—å –∏–º–ø–æ—Ä—Ç—ã
3. `search(import1)` ‚Üí –Ω–∞–π—Ç–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å
4. `read_file(dep1)` ‚Üí –ø—Ä–æ—á–∏—Ç–∞—Ç—å –∫–æ–¥
5. –ü–æ–≤—Ç–æ—Ä–∏—Ç—å –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞ ‚Üí 5-10 –≤—ã–∑–æ–≤–æ–≤

**–¢–µ–∫—É—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ:** `context_bundle(file, depth=2)` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç **—Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∫–æ–¥–∞**.

**–£–ª—É—á—à–µ–Ω–∏–µ:**
```rust
smart_context_bundle(file, mode="summary") -> {
    main_file: FullContent,
    dependencies: Vec<{
        file: String,
        summary: String,        // AI-generated –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
        exports: Vec<Symbol>,   // –¢–æ–ª—å–∫–æ –ø—É–±–ª–∏—á–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã
        imports_from_main: Vec<Symbol>  // –ß—Ç–æ –∏–º–µ–Ω–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
    }>
}
```

**Impact:** 70-80% —ç–∫–æ–Ω–æ–º–∏–∏ —Ç–æ–∫–µ–Ω–æ–≤ –ø—Ä–∏ –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–º –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–∏

---

### Pattern 8: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
**–ü—Ä–æ–±–ª–µ–º–∞:** –í —Ç–µ—á–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ —Å–µ–∞–Ω—Å–∞ –ø–æ–≤—Ç–æ—Ä—è—é—Ç—Å—è –æ–¥–Ω–∏ –∏ —Ç–µ –∂–µ –∑–∞–ø—Ä–æ—Å—ã:
- `read_file("embedder.rs")` ‚Üí 3 —Ä–∞–∑–∞ –∑–∞ —Å–µ–∞–Ω—Å
- `get_symbols(file="watcher.rs")` ‚Üí 2 —Ä–∞–∑–∞
- `search("embedding config")` ‚Üí 2 —Ä–∞–∑–∞

gofer MCP –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∑–∞–Ω–æ–≤–æ –∫–∞–∂–¥—ã–π —Ä–∞–∑.

**–†–µ—à–µ–Ω–∏–µ:**
```rust
// Server-side cache —Å TTL
struct CacheConfig {
    read_file_ttl: Duration,      // 5 –º–∏–Ω—É—Ç
    get_symbols_ttl: Duration,    // 10 –º–∏–Ω—É—Ç
    search_ttl: Duration,         // 2 –º–∏–Ω—É—Ç—ã
    max_cache_size: usize         // 100 MB
}
```

–ò–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä `use_cache: bool = true` –∫ –∫–∞–∂–¥–æ–º—É –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—É.

**Impact:**
- –≠–∫–æ–Ω–æ–º–∏—è: 30-40% –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î
- –í—Ä–µ–º—è: ~1-2 —Å–µ–∫—É–Ω–¥—ã –Ω–∞ –∫–∞–∂–¥—ã–π –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å
- –û—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –¥–ª–∏–Ω–Ω—ã—Ö —Å–µ–∞–Ω—Å–æ–≤

---

### Pattern 9: –ò–∑–±—ã—Ç–æ—á–Ω–æ–µ —á—Ç–µ–Ω–∏–µ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è
**–ü—Ä–æ–±–ª–µ–º–∞:** –î–ª—è boolean –æ—Ç–≤–µ—Ç–æ–≤ –¥–µ–ª–∞—é—Ç—Å—è full reads:
- "–ï—Å—Ç—å –ª–∏ —Ç–µ—Å—Ç—ã –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–∏ X?" ‚Üí `search("test X")` ‚Üí 5000 —Ç–æ–∫–µ–Ω–æ–≤ ‚Üí –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å yes/no
- "–°—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —Ñ–∞–π–ª config.rs?" ‚Üí `read_file()` ‚Üí 3000 —Ç–æ–∫–µ–Ω–æ–≤ ‚Üí –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ boolean

**–†–µ—à–µ–Ω–∏–µ:** Lightweight checking tools:
```rust
file_exists(path: String) -> bool
symbol_exists(name: String, kind: Option<String>) -> Option<Location>
has_tests_for(symbol: String) -> bool
has_documentation(symbol: String) -> bool
is_exported(symbol: String) -> bool
```

**Impact:** 95% —ç–∫–æ–Ω–æ–º–∏–∏ —Ç–æ–∫–µ–Ω–æ–≤ –¥–ª—è existence checks

---

### Pattern 10: –ù–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –±–æ–ª—å—à–∏–º–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –ø–æ–∏—Å–∫–∞
**–ü—Ä–æ–±–ª–µ–º–∞:** `search(query)` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–Ω–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (50+ —Ñ–∞–π–ª–æ–≤), –Ω–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã —Ç–æ–ª—å–∫–æ —Ç–æ–ø-3.
- –ù–µ—Ç `confidence_score` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
- –ù–µ—Ç preview ‚Üí –Ω—É–∂–Ω–æ —á–∏—Ç–∞—Ç—å —Ñ–∞–π–ª—ã –≤—Å–ª–µ–ø—É—é

**–†–µ—à–µ–Ω–∏–µ 1:** –î–æ–±–∞–≤–∏—Ç—å scores –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º—É `search`:
```rust
search(query, include_scores: bool = true) -> Vec<{
    file: String,
    line: u32,
    content: String,
    score: f32,           // 0.0 - 1.0
    match_reason: String  // "function name match", "doc comment match", etc.
}>
```

**–†–µ—à–µ–Ω–∏–µ 2:** –ù–æ–≤—ã–π lightweight –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç:
```rust
search_preview(query, limit=20) -> Vec<{
    file: String,
    line: u32,
    preview: String,      // –ü–µ—Ä–≤—ã–µ 2 —Å—Ç—Ä–æ–∫–∏ match
    score: f32,
    context: String       // –ù–∞–∑–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏/–∫–ª–∞—Å—Å–∞ –≥–¥–µ –Ω–∞–π–¥–µ–Ω–æ
}>
```

AI –º–æ–∂–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ preview —Ä–µ—à–∏—Ç—å, –∫–∞–∫–∏–µ —Ñ–∞–π–ª—ã —á–∏—Ç–∞—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é.

**Impact:** 80% —ç–∫–æ–Ω–æ–º–∏–∏ —Ç–æ–∫–µ–Ω–æ–≤ –ø—Ä–∏ —à–∏—Ä–æ–∫–∏—Ö –ø–æ–∏—Å–∫–∞—Ö

---

### Pattern 11: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ batch –æ–ø–µ—Ä–∞—Ü–∏–π
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–∏–º–≤–æ–ª–∞—Ö —Ç—Ä–µ–±—É–µ—Ç N –æ—Ç–¥–µ–ª—å–Ω—ã—Ö round-trips:
```
get_callees("fn1") ‚Üí 0.5s
get_callees("fn2") ‚Üí 0.5s  
get_callees("fn3") ‚Üí 0.5s
Total: 1.5s + network overhead
```

**–†–µ—à–µ–Ω–∏–µ:** Batch API:
```rust
batch_get_callees(symbols: Vec<String>) -> HashMap<String, Vec<Callee>>
batch_read_files(paths: Vec<String>) -> HashMap<String, FileContent>
batch_get_symbols(files: Vec<String>) -> HashMap<String, Vec<Symbol>>
```

**Impact:**
- –≠–∫–æ–Ω–æ–º–∏—è: N round-trips ‚Üí 1 round-trip
- –í—Ä–µ–º—è: -(N-1) √ó 0.5 —Å–µ–∫—É–Ω–¥—ã –Ω–∞ –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å
- –û—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –º–æ–¥—É–ª–µ–π/–ø–∞–∫–µ—Ç–æ–≤

---

### Pattern 12: –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞
**–ü—Ä–æ–±–ª–µ–º–∞:** AI –Ω—É–∂–Ω—ã —Å–∏–º–≤–æ–ª—ã —Å –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–º–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏:
- "–ü—É–±–ª–∏—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏" ‚Üí –ø–æ–ª—É—á–∞–µ—Ç –≤—Å–µ 200+ —Ñ—É–Ω–∫—Ü–∏–π ‚Üí —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –≤—Ä—É—á–Ω—É—é
- "–ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –∫–æ–¥" ‚Üí –Ω—É–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å `get_symbols()` + `get_references()` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ
- "–§—É–Ω–∫—Ü–∏–∏ —Å —Ç–µ—Å—Ç–∞–º–∏" ‚Üí –Ω–µ—Ç —Å–ø–æ—Å–æ–±–∞ —É–∑–Ω–∞—Ç—å

**–†–µ—à–µ–Ω–∏–µ 1:** –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã:
```rust
get_symbols(
    kind: Option<String>,
    visibility: Option<Visibility>,  // public/private/internal
    has_tests: Option<bool>,
    is_used: Option<bool>,           // –ï—Å—Ç—å –ª–∏ references
    is_exported: Option<bool>,
    min_complexity: Option<u32>,
    file_pattern: Option<String>     // glob pattern
)
```

**–†–µ—à–µ–Ω–∏–µ 2:** Query DSL:
```rust
query_symbols(query: "function AND public AND tested")
query_symbols(query: "struct AND unused AND NOT test_*")
```

**Impact:** 90% —ç–∫–æ–Ω–æ–º–∏–∏ –Ω–µ–Ω—É–∂–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö

---

### Pattern 13: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
**–ü—Ä–æ–±–ª–µ–º–∞:** –í–æ–ø—Ä–æ—Å—ã —Ç–∏–ø–∞:
- "–°–∫–æ–ª—å–∫–æ —É –Ω–∞—Å API endpoints?" ‚Üí `get_api_routes()` ‚Üí –ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ ‚Üí –ø–æ—Å—á–∏—Ç–∞—Ç—å –≤—Ä—É—á–Ω—É—é
- "–ö–∞–∫–∏–µ —Å–∞–º—ã–µ –≤—ã–∑—ã–≤–∞–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏?" ‚Üí `get_callers()` –¥–ª—è –∫–∞–∂–¥–æ–π ‚Üí —Å—Ä–∞–≤–Ω–∏—Ç—å
- "–ö–∞–∫–æ–≤–∞ —Å—Ä–µ–¥–Ω—è—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏–π?" ‚Üí –Ω–µ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ –≤–æ–æ–±—â–µ

**–†–µ—à–µ–Ω–∏–µ:** Analytics tools:
```rust
get_code_stats(metric: Metric) -> StatsResult
// Metrics: api_count, function_count, test_coverage, avg_complexity, etc.

get_hotspots(type: HotspotType, limit: u32) -> Vec<Hotspot>
// Types: most_called, most_complex, most_changed, largest_files, etc.

get_complexity_report(threshold: Option<u32>) -> ComplexityReport

get_test_coverage(granularity: Granularity) -> CoverageReport
// Granularity: file, module, function
```

**Impact:**
- 95% —ç–∫–æ–Ω–æ–º–∏–∏ —Ç–æ–∫–µ–Ω–æ–≤ –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
- –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç –≤–º–µ—Å—Ç–æ –º–Ω–æ–≥–æ—Å—Ç—É–ø–µ–Ω—á–∞—Ç–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞

---

### Pattern 14: –ù–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –∫–æ–¥—É –ø—Ä–∏ –æ—Ç–ª–∞–¥–∫–µ
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –æ—Ç–ª–∞–¥–∫–µ –æ—à–∏–±–∫–∏ —Ç–∏–ø–∏—á–Ω—ã–π flow:
1. `search(error_message)` ‚Üí –Ω–∞–π—Ç–∏ –º–µ—Å—Ç–æ –æ—à–∏–±–∫–∏
2. `read_file(error_location)` ‚Üí –ø—Ä–æ—á–∏—Ç–∞—Ç—å –∫–æ–¥
3. `get_callers(error_function)` ‚Üí –∫—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç
4. `read_file(caller1)` ‚Üí –ø—Ä–æ—á–∏—Ç–∞—Ç—å caller
5. `get_callers(caller1)` ‚Üí —Å–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å
6. –ü–æ–≤—Ç–æ—Ä–∏—Ç—å –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è full call stack ‚Üí 10-15 –≤—ã–∑–æ–≤–æ–≤

**–†–µ—à–µ–Ω–∏–µ 1:** Trace execution:
```rust
trace_execution_path(
    from_symbol: String,
    to_symbol: String,
    max_depth: u32
) -> ExecutionGraph {
    nodes: Vec<CallNode>,
    edges: Vec<CallEdge>,
    paths: Vec<Vec<String>>  // –í—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –ø—É—Ç–∏
}
```

**–†–µ—à–µ–Ω–∏–µ 2:** Error context analyzer:
```rust
analyze_error(
    error_location: Location,
    stack_depth: u32 = 3
) -> ErrorContext {
    error_site: CodeContext,
    call_stack: Vec<CallFrame>,
    related_symbols: Vec<Symbol>,
    similar_errors: Vec<Location>,    // –ü–æ—Ö–æ–∂–∏–µ –æ—à–∏–±–∫–∏ –≤ –∫–æ–¥–æ–≤–æ–π –±–∞–∑–µ
    suggested_fixes: Vec<Suggestion>
}
```

**Impact:**
- 80% —ç–∫–æ–Ω–æ–º–∏–∏ –≤—ã–∑–æ–≤–æ–≤ –ø—Ä–∏ –æ—Ç–ª–∞–¥–∫–µ
- –í 5 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ –¥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è root cause

---

## –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### üî¥ High Priority (–Ω–∞–∏–±–æ–ª—å—à–∏–π impact)

| –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è | –≠–∫–æ–Ω–æ–º–∏—è —Ç–æ–∫–µ–Ω–æ–≤ | –≠–∫–æ–Ω–æ–º–∏—è –≤—Ä–µ–º–µ–Ω–∏ | –°–ª–æ–∂–Ω–æ—Å—Ç—å | ROI |
|-------------|------------------|------------------|-----------|-----|
| **get_symbol_context** | 60-70% | 2-3 —Å–µ–∫ | –°—Ä–µ–¥–Ω—è—è | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê |
| **search_preview + scores** | 80% | 1-2 —Å–µ–∫ | –ù–∏–∑–∫–∞—è | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê |
| **Server-side cache** | 30-40% | 1-2 —Å–µ–∫ | –°—Ä–µ–¥–Ω—è—è | ‚≠ê‚≠ê‚≠ê‚≠ê |
| **Lightweight checks** | 95% | 0.5 —Å–µ–∫ | –ù–∏–∑–∫–∞—è | ‚≠ê‚≠ê‚≠ê‚≠ê |

### üü° Medium Priority (—Ö–æ—Ä–æ—à–∏–π impact, —Å—Ä–µ–¥–Ω—è—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å)

| –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è | –≠–∫–æ–Ω–æ–º–∏—è —Ç–æ–∫–µ–Ω–æ–≤ | –≠–∫–æ–Ω–æ–º–∏—è –≤—Ä–µ–º–µ–Ω–∏ | –°–ª–æ–∂–Ω–æ—Å—Ç—å | ROI |
|-------------|------------------|------------------|-----------|-----|
| **Batch operations** | 30-40% | (N-1)√ó0.5 —Å–µ–∫ | –°—Ä–µ–¥–Ω—è—è | ‚≠ê‚≠ê‚≠ê‚≠ê |
| **smart_context_bundle** | 70-80% | 1 —Å–µ–∫ | –°—Ä–µ–¥–Ω—è—è | ‚≠ê‚≠ê‚≠ê‚≠ê |
| **Server-side filters** | 90% | 0.5 —Å–µ–∫ | –í—ã—Å–æ–∫–∞—è | ‚≠ê‚≠ê‚≠ê |
| **get_code_stats** | 95% | instant | –°—Ä–µ–¥–Ω—è—è | ‚≠ê‚≠ê‚≠ê |

### üü¢ Low Priority (nice to have)

| –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è | –≠–∫–æ–Ω–æ–º–∏—è —Ç–æ–∫–µ–Ω–æ–≤ | –≠–∫–æ–Ω–æ–º–∏—è –≤—Ä–µ–º–µ–Ω–∏ | –°–ª–æ–∂–Ω–æ—Å—Ç—å | ROI |
|-------------|------------------|------------------|-----------|-----|
| **trace_execution_path** | 80% | 3-4 —Å–µ–∫ | –í—ã—Å–æ–∫–∞—è | ‚≠ê‚≠ê‚≠ê |
| **analyze_error** | 70% | 2-3 —Å–µ–∫ | –í—ã—Å–æ–∫–∞—è | ‚≠ê‚≠ê |
| **Query DSL** | 90% | 0.5 —Å–µ–∫ | –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è | ‚≠ê‚≠ê |

---

## Roadmap —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### Phase 1: Quick Wins (1-2 –Ω–µ–¥–µ–ª–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
‚úÖ –ù–∏–∑–∫–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å, –≤—ã—Å–æ–∫–∏–π impact

1. **Lightweight checks** (`file_exists`, `symbol_exists`, `has_tests_for`)
   - –ü—Ä–æ—Å—Ç—ã–µ SQL –∑–∞–ø—Ä–æ—Å—ã
   - Minimal JSON overhead
   
2. **search_preview with scores**
   - –£–∂–µ –µ—Å—Ç—å relevance scores –≤ –≤–µ–∫—Ç–æ—Ä–Ω–æ–º –ø–æ–∏—Å–∫–µ
   - –ü—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ response + truncate content

3. **Compact output formats**
   - –î–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä `format` –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º tools
   - `format="compact"` ‚Üí —Ç–æ–ª—å–∫–æ essential fields

### Phase 2: Core Optimizations (2-3 –Ω–µ–¥–µ–ª–∏)
üéØ –°—Ä–µ–¥–Ω—è—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å, –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π impact

4. **get_symbol_context unified tool**
   - –û–±—ä–µ–¥–∏–Ω—è–µ—Ç 4 —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∑–∞–ø—Ä–æ—Å–∞
   - –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
   
5. **Server-side cache —Å TTL**
   - LRU cache –¥–ª—è read_file, get_symbols
   - Configurable TTL per tool type
   
6. **Batch operations**
   - `batch_get_callees`, `batch_read_files`
   - –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞

### Phase 3: Advanced Features (3-4 –Ω–µ–¥–µ–ª–∏)
üöÄ –í—ã—Å–æ–∫–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å, —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ use cases

7. **smart_context_bundle —Å summary mode**
   - AI-powered summaries –¥–ª—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
   - –¢—Ä–µ–±—É–µ—Ç integration —Å summarizer
   
8. **Server-side filters –∏ query DSL**
   - –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –≤ SQL
   - Query parser –¥–ª—è DSL
   
9. **Analytics tools** (`get_code_stats`, `get_hotspots`)
   - Pre-computed metrics –≤ –ë–î
   - Background aggregation jobs

10. **trace_execution_path**
    - Graph traversal –∞–ª–≥–æ—Ä–∏—Ç–º—ã
    - Call graph representation

---

## –û–∂–∏–¥–∞–µ–º—ã–π —Å—É–º–º–∞—Ä–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç

–ü–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≤—Å–µ—Ö –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π:

### –ú–µ—Ç—Ä–∏–∫–∏ —É–ª—É—á—à–µ–Ω–∏—è
- **–≠–∫–æ–Ω–æ–º–∏—è —Ç–æ–∫–µ–Ω–æ–≤:** 50-70% –≤ —Å—Ä–µ–¥–Ω–µ–º –ø–æ —Ç–∏–ø–∏—á–Ω—ã–º –∑–∞–¥–∞—á–∞–º
- **–≠–∫–æ–Ω–æ–º–∏—è –≤—Ä–µ–º–µ–Ω–∏:** 40-60% —É—Å–∫–æ—Ä–µ–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á
- **–ö–∞—á–µ—Å—Ç–≤–æ –æ—Ç–≤–µ—Ç–æ–≤:** +30% –±–ª–∞–≥–æ–¥–∞—Ä—è –±–æ–ª–µ–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ–º—É –∫–æ–Ω—Ç–µ–∫—Å—Ç—É
- **–°–Ω–∏–∂–µ–Ω–∏–µ hallucinations:** -40% –±–ª–∞–≥–æ–¥–∞—Ä—è –º–µ–Ω—å—à–µ–º—É cognitive load

### –¢–∏–ø–∏—á–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**–°—Ü–µ–Ω–∞—Ä–∏–π 1: "–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç feature X?"**
- **–î–æ:** 10 –≤—ã–∑–æ–≤–æ–≤, 25000 —Ç–æ–∫–µ–Ω–æ–≤, 15 —Å–µ–∫—É–Ω–¥
- **–ü–æ—Å–ª–µ:** 3 –≤—ã–∑–æ–≤–∞, 8000 —Ç–æ–∫–µ–Ω–æ–≤, 5 —Å–µ–∫—É–Ω–¥
- **–£–ª—É—á—à–µ–Ω–∏–µ:** 68% —Ç–æ–∫–µ–Ω–æ–≤, 67% –≤—Ä–µ–º–µ–Ω–∏

**–°—Ü–µ–Ω–∞—Ä–∏–π 2: "–ù–∞–π–¥–∏ –∏ –∏—Å–ø—Ä–∞–≤—å bug"**
- **–î–æ:** 15 –≤—ã–∑–æ–≤–æ–≤, 35000 —Ç–æ–∫–µ–Ω–æ–≤, 25 —Å–µ–∫—É–Ω–¥
- **–ü–æ—Å–ª–µ:** 4 –≤—ã–∑–æ–≤–∞, 10000 —Ç–æ–∫–µ–Ω–æ–≤, 8 —Å–µ–∫—É–Ω–¥
- **–£–ª—É—á—à–µ–Ω–∏–µ:** 71% —Ç–æ–∫–µ–Ω–æ–≤, 68% –≤—Ä–µ–º–µ–Ω–∏

**–°—Ü–µ–Ω–∞—Ä–∏–π 3: "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–æ–¥–æ–≤–æ–π –±–∞–∑–µ"**
- **–î–æ:** 20+ –≤—ã–∑–æ–≤–æ–≤, 50000 —Ç–æ–∫–µ–Ω–æ–≤, 40 —Å–µ–∫—É–Ω–¥
- **–ü–æ—Å–ª–µ:** 1 –≤—ã–∑–æ–≤, 500 —Ç–æ–∫–µ–Ω–æ–≤, 2 —Å–µ–∫—É–Ω–¥—ã
- **–£–ª—É—á—à–µ–Ω–∏–µ:** 99% —Ç–æ–∫–µ–Ω–æ–≤, 95% –≤—Ä–µ–º–µ–Ω–∏

---

## Implementation Notes

### –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
–í—Å–µ –Ω–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å optional —Å sensible defaults:
```rust
fn search(
    query: String,
    limit: Option<u32>,
    include_scores: Option<bool> = Some(false),  // –ù–æ–≤—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä
    format: Option<OutputFormat> = Some(OutputFormat::Full)
) -> SearchResult
```

### Monitoring
–î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏:
- Cache hit rate
- Average tokens per request (before/after)
- Request latency percentiles
- Most used tool combinations

### Configuration
–°–¥–µ–ª–∞—Ç—å –≤—Å–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º—ã–º–∏:
```toml
[optimization]
enable_cache = true
cache_ttl_seconds = 300
enable_batch_operations = true
max_batch_size = 50
default_output_format = "compact"
```

---

## Feedback Loop

–ü–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–∞–∂–¥–æ–π —Ñ–∞–∑—ã:
1. A/B testing —Å AI agents
2. –°–±–æ—Ä –º–µ—Ç—Ä–∏–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
3. –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤ —Å–ª–µ–¥—É—é—â–∏—Ö —Ñ–∞–∑

**–ê–≤—Ç–æ—Ä –∞–Ω–∞–ª–∏–∑–∞:** AI Agent (Qoder)  
**–î–∞—Ç–∞:** 2026-02-16  
**–ö–æ–Ω—Ç–µ–∫—Å—Ç:** –ì–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è gofer MCP

# 06. Get File Diff

## –ö–∞—Ç–µ–≥–æ—Ä–∏—è
–£–º–Ω–æ–µ —á—Ç–µ–Ω–∏–µ (Resources & Tools)

## –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç
üü° **P2** (–ü–æ–ª–µ–∑–Ω–æ)

## –û—Ü–µ–Ω–∫–∞ –ø–æ–ª–µ–∑–Ω–æ—Å—Ç–∏ –¥–ª—è AI
‚≠ê‚≠ê‚≠ê‚≠ê (4/5)

## –û–ø–∏—Å–∞–Ω–∏–µ
–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Git –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ —Ñ–∞–π–ª–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –∫–æ–º–º–∏—Ç–∞.

## –ü—Ä–æ–±–ª–µ–º–∞
AI –Ω—É–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å, —á—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –≤ —Ñ–∞–π–ª–µ —Å –º–æ–º–µ–Ω—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∫–æ–º–º–∏—Ç–∞ –∏–ª–∏ –º–µ–∂–¥—É –¥–≤—É–º—è –≤–µ—Ä—Å–∏—è–º–∏. –≠—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –ø—Ä–∏ code review, –æ—Ç–ª–∞–¥–∫–µ —Ä–µ–≥—Ä–µ—Å—Å–∏–π, –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø–æ—Å–ª–µ –æ—à–∏–±–æ–∫.

## –°–∏–≥–Ω–∞—Ç—É—Ä–∞
```
get_file_diff(path, commit_hash, base_commit) -> FileDiff
```

## –ü–∞—Ä–∞–º–µ—Ç—Ä—ã
- `path` (string) ‚Äî –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É
- `commit_hash` (string, optional) ‚Äî —Ö–µ—à –∫–æ–º–º–∏—Ç–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: HEAD)
- `base_commit` (string, optional) ‚Äî –±–∞–∑–æ–≤—ã–π –∫–æ–º–º–∏—Ç –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: —Ä–∞–±–æ—á–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è)

## –í–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
```json
{
  "path": "src/auth.rs",
  "base_commit": "abc123",
  "target_commit": "HEAD",
  "additions": 15,
  "deletions": 8,
  "diff": "@@ -42,7 +42,8 @@\n fn authenticate() {\n-    // Old logic\n+    // New logic\n+    verify_token();\n }",
  "hunks": [
    {
      "old_start": 42,
      "old_lines": 7,
      "new_start": 42,
      "new_lines": 8,
      "content": "..."
    }
  ]
}
```

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–µ–∑–∞–∫–æ–º–º–∏—á–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
```
AI: get_file_diff("src/auth.rs")
Result: –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –≤ —Ä–∞–±–æ—á–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ HEAD
```

### –ü—Ä–∏–º–µ—Ä 2: –°—Ä–∞–≤–Ω–∏—Ç—å —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –∫–æ–º–º–∏—Ç–æ–º
```
AI: get_file_diff("src/auth.rs", base_commit="abc123", target_commit="def456")
Result: –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –º–µ–∂–¥—É –¥–≤—É–º—è –∫–æ–º–º–∏—Ç–∞–º–∏
```

### –ü—Ä–∏–º–µ—Ä 3: –ê–Ω–∞–ª–∏–∑ —Ä–µ–≥—Ä–µ—Å—Å–∏–∏
```
User: "–§—É–Ω–∫—Ü–∏—è authenticate —Å–ª–æ–º–∞–ª–∞—Å—å –ø–æ—Å–ª–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∫–æ–º–º–∏—Ç–∞"
AI: get_file_diff("src/auth.rs", base_commit="HEAD~1")
AI: (–≤–∏–¥–∏—Ç –¥–æ–±–∞–≤–ª–µ–Ω–Ω—É—é —Å—Ç—Ä–æ–∫—É verify_token() ‚Äî –≤–æ–∑–º–æ–∂–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞ –±–∞–≥–∞)
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞
- **Code review**: AI –º–æ–∂–µ—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
- **–û—Ç–ª–∞–¥–∫–∞**: –ø–æ–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –∏ –º–æ–≥–ª–æ –≤—ã–∑–≤–∞—Ç—å –±–∞–≥
- **–ö–æ–Ω—Ç–µ–∫—Å—Ç**: AI –≤–∏–¥–∏—Ç —ç–≤–æ–ª—é—Ü–∏—é –∫–æ–¥–∞

## –°–ª–æ–∂–Ω–æ—Å—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
–°—Ä–µ–¥–Ω—è—è (2-3 –¥–Ω—è)

## –°—Ç–∞—Ç—É—Å –≤ gofer
‚úÖ –ß–∞—Å—Ç–∏—á–Ω–æ: –µ—Å—Ç—å `git_history` –∏ `git_blame`, –Ω–æ –Ω–µ—Ç –ø—Ä—è–º–æ–≥–æ diff

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- git2 library (—É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ gofer)

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã
- `git_history` + –∞–Ω–∞–ª–∏–∑ –∫–æ–º–º–∏—Ç–æ–≤ (–º–µ–Ω–µ–µ —É–¥–æ–±–Ω–æ)
- –í–Ω–µ—à–Ω–∏–π git MCP-—Å–µ—Ä–≤–µ—Ä

## –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- `git_history` ‚Äî –∏—Å—Ç–æ—Ä–∏—è –∫–æ–º–º–∏—Ç–æ–≤ —Ñ–∞–π–ª–∞
- `git_blame` ‚Äî –∞–≤—Ç–æ—Ä—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫
- `function_history` ‚Äî –∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏

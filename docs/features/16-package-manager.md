# 16. Package Manager Integration

## –ö–∞—Ç–µ–≥–æ—Ä–∏—è
–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏

## –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç
üî¥ **P1** (–û—á–µ–Ω—å –ø–æ–ª–µ–∑–Ω–æ)

## –û—Ü–µ–Ω–∫–∞ –ø–æ–ª–µ–∑–Ω–æ—Å—Ç–∏ –¥–ª—è AI
‚≠ê‚≠ê‚≠ê‚≠ê (4/5)

## –û–ø–∏—Å–∞–Ω–∏–µ
–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å package managers –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏, –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏ —É–¥–∞–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.

## –ü—Ä–æ–±–ª–µ–º–∞
AI –∑–Ω–∞–µ—Ç, —á—Ç–æ –ø—Ä–æ–µ–∫—Ç—É –Ω—É–∂–Ω–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ `tokio` –∏–ª–∏ `react`, –Ω–æ –Ω–µ –º–æ–∂–µ—Ç –µ—ë —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å. –ü—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –ø—Ä–æ—Å–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ –≤—Ä—É—á–Ω—É—é, —á—Ç–æ –∑–∞–º–µ–¥–ª—è–µ—Ç workflow.

## API

### install_dependency(name, version, dev)
–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞–∫–µ—Ç.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `name` (string) ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–∞–∫–µ—Ç–∞
- `version` (string, optional) ‚Äî –≤–µ—Ä—Å–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: latest)
- `dev` (boolean, optional) ‚Äî dev-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: false)

**–ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ package manager:**
- `Cargo.toml` ‚Üí `cargo add`
- `package.json` ‚Üí `npm install` / `yarn add` / `pnpm add`
- `pyproject.toml` / `requirements.txt` ‚Üí `pip install`
- `go.mod` ‚Üí `go get`

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
```json
{
  "package": "tokio",
  "version": "1.35.0",
  "manager": "cargo",
  "status": "installed",
  "install_time_ms": 2400
}
```

**–ü—Ä–∏–º–µ—Ä—ã:**

#### Rust
```
AI: install_dependency("tokio", version="1.35", dev=false)
Result: –≤—ã–ø–æ–ª–Ω–µ–Ω–æ "cargo add tokio@1.35"
```

#### TypeScript
```
AI: install_dependency("react", version="^18.0.0", dev=false)
AI: install_dependency("@types/react", version="^18.0.0", dev=true)
Result: –≤—ã–ø–æ–ª–Ω–µ–Ω–æ "npm install react@^18.0.0" –∏ "npm install -D @types/react"
```

#### Python
```
AI: install_dependency("fastapi", version=">=0.100.0")
Result: –≤—ã–ø–æ–ª–Ω–µ–Ω–æ "pip install 'fastapi>=0.100.0'"
```

---

### update_dependency(name, version)
–û–±–Ω–æ–≤–∏—Ç—å –≤–µ—Ä—Å–∏—é –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `name` (string) ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–∞–∫–µ—Ç–∞
- `version` (string) ‚Äî –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
```json
{
  "package": "serde",
  "old_version": "1.0.190",
  "new_version": "1.0.195",
  "status": "updated"
}
```

**–ü—Ä–∏–º–µ—Ä:**
```
AI: update_dependency("serde", "1.0.195")
Result: –≤ Cargo.toml: serde = "1.0.190" ‚Üí serde = "1.0.195"
```

---

### remove_dependency(name)
–£–¥–∞–ª–∏—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—É—é –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `name` (string) ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–∞–∫–µ—Ç–∞

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
```json
{
  "package": "unused-lib",
  "status": "removed",
  "manager": "cargo"
}
```

**–ü—Ä–∏–º–µ—Ä:**
```
AI: remove_dependency("unused-lib")
Result: –≤—ã–ø–æ–ª–Ω–µ–Ω–æ "cargo remove unused-lib"
```

---

### check_outdated()
–°–ø–∏—Å–æ–∫ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
```json
{
  "outdated": [
    {
      "package": "tokio",
      "current": "1.30.0",
      "latest": "1.35.0",
      "update_available": "minor"
    },
    {
      "package": "serde",
      "current": "1.0.180",
      "latest": "1.0.195",
      "update_available": "patch"
    }
  ]
}
```

**–ü—Ä–∏–º–µ—Ä:**
```
AI: check_outdated()
Result: —Å–ø–∏—Å–æ–∫ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –ø–∞–∫–µ—Ç–æ–≤

AI: update_dependency("tokio", "1.35.0")
AI: update_dependency("serde", "1.0.195")
```

---

### resolve_dependency_conflicts()
–ü–æ–ø—ã—Ç–∞—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑—Ä–µ—à–∏—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –≤–µ—Ä—Å–∏–π.

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
```json
{
  "status": "resolved",
  "conflicts_found": 2,
  "conflicts_resolved": 2,
  "changes": [
    {
      "package": "tokio",
      "old_version": "1.30",
      "new_version": "1.32",
      "reason": "Required by async-std@1.12"
    }
  ]
}
```

**–ü—Ä–∏–º–µ—Ä:**
```
AI: install_dependency("async-std")
Error: version conflict with tokio

AI: resolve_dependency_conflicts()
Result: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã –≤–µ—Ä—Å–∏–∏ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
```

## –ü—Ä–∏–º–µ—Ä—ã –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: AI –¥–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤—É—é —Ñ–∏—á—É, —Ç—Ä–µ–±—É—é—â—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É
```
User: "–î–æ–±–∞–≤—å –ø–æ–¥–¥–µ—Ä–∂–∫—É JWT-—Ç–æ–∫–µ–Ω–æ–≤"

AI: (–∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∫–æ–¥, –ø–æ–Ω–∏–º–∞–µ—Ç —á—Ç–æ –Ω—É–∂–Ω–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞)
AI: install_dependency("jsonwebtoken", version="9.0")
AI: auto_import("src/auth.rs", "jsonwebtoken")
AI: patch_file("src/auth.rs", ..., replace="use jsonwebtoken::{encode, decode};")
AI: (—Ä–µ–∞–ª–∏–∑—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª)

Result: –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: AI –æ–±–Ω–æ–≤–ª—è–µ—Ç —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```
AI: check_outdated()
Result: 5 outdated packages

AI: (–∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç breaking changes –≤ changelog)
AI: update_dependency("tokio", "1.35")
AI: update_dependency("serde", "1.0.195")
AI: (–æ–±–Ω–æ–≤–ª—è–µ—Ç –∫–æ–¥ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

### 1. –ê–≤—Ç–æ–Ω–æ–º–Ω–æ—Å—Ç—å AI
AI –º–æ–∂–µ—Ç —Å–∞–º —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –±–µ–∑ —É—á–∞—Å—Ç–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

### 2. –°–∫–æ—Ä–æ—Å—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
–ù–µ—Ç –æ–∂–∏–¥–∞–Ω–∏—è –ø–æ–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—Ä—É—á–Ω—É—é —É—Å—Ç–∞–Ω–æ–≤–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.

### 3. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
AI –≤–∏–¥–∏—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –≤–µ—Ä—Å–∏–π –∏ –º–æ–∂–µ—Ç –∏—Ö —Ä–∞–∑—Ä–µ—à–∏—Ç—å.

## –°–ª–æ–∂–Ω–æ—Å—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
–°—Ä–µ–¥–Ω—è—è (3-4 –¥–Ω—è)
- –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (install/remove): –Ω–∏–∑–∫–∞—è (1 –¥–µ–Ω—å)
- –ê–≤—Ç–æ-–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ package manager: –Ω–∏–∑–∫–∞—è (1 –¥–µ–Ω—å)
- Conflict resolution: —Å—Ä–µ–¥–Ω—è—è (2 –¥–Ω—è)

## –°—Ç–∞—Ç—É—Å –≤ gofer
‚úÖ –ß–∞—Å—Ç–∏—á–Ω–æ: –µ—Å—Ç—å `get_dependencies` (—Å–ø–∏—Å–æ–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π), –Ω–æ –Ω–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- Package managers (cargo, npm, pip, –∏ —Ç.–¥.)
- Lockfile parsers (Cargo.lock, package-lock.json, –∏ —Ç.–¥.)

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –¥–æ–ª–∂–Ω–∞ —Ç—Ä–µ–±–æ–≤–∞—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è:
```
AI: install_dependency("some-random-package")

Prompt to user: "AI wants to install 'some-random-package@1.0.0'. Allow? (y/n)"
```

### Whitelist –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤
–í –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤:
```toml
[dependencies]
auto_install = false  # —Ç—Ä–µ–±–æ–≤–∞—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
trusted_packages = [
  "tokio",
  "serde",
  "react",
  "typescript"
]
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```toml
[dependencies]
# –†–∞–∑—Ä–µ—à–∏—Ç—å AI —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
auto_install = false  # —Ç—Ä–µ–±–æ–≤–∞—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

# –î–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –ø–∞–∫–µ—Ç—ã (—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –±–µ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è)
trusted_packages = []

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤
auto_resolve_conflicts = false

# –ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ–º—ã–π package manager (–¥–ª—è JS –ø—Ä–æ–µ–∫—Ç–æ–≤)
preferred_js_manager = "npm"  # "npm" | "yarn" | "pnpm"
```

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—Ä—É—á–Ω—É—é —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–º–µ–¥–ª–µ–Ω–Ω–æ)
- AI —Ç–æ–ª—å–∫–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ (–Ω–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–æ)

## –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- `get_dependencies` ‚Äî —Å–ø–∏—Å–æ–∫ —Ç–µ–∫—É—â–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- `dependency_impact` ‚Äî –∫–∞–∫–∏–µ —Ñ–∞–π–ª—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å
- `auto_import` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏–º–ø–æ—Ä—Ç–æ–≤ –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
